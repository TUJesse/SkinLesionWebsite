<!DOCTYPE html>
<html>
<body onload="myMap()">
<h1>HTML Geolocation</h1>
<p>Click the button to get your coordinates.</p>

<button onclick="myMap()">Try It</button>


<h1>My First Google Map</h1>

<div id="googleMap" style="width:100%;height:400px;"></div>

<p id="demo"></p>

<script>
const x = document.getElementById("demo");

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

function showPosition(position) {
  x.innerHTML = "Latitude: " + position.coords.latitude +
  "<br>Longitude: " + position.coords.longitude;
}
</script>



<script>

    function myMap() {

        if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }

   var lat;
   var lon;


   function showPosition(position) {
  lat =  position.coords.latitude;
  lon = position.coords.longitude;

  var myLatlng = new google.maps.LatLng(lat,lon);

  var mapProp= {
  center:myLatlng,
  zoom:15,
};
var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

var marker = new google.maps.Marker({position: myLatlng,
    title:"Your Location"});

marker.setMap(map);
}
}


{% comment %}var mapProp= {
  center:new google.maps.LatLng(lat,lon),
  zoom:10,
};
var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
}{% endcomment %}
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC3ZyZQMInDfjo9PGe9v2FD0ZVgBD6-PLI&callback=myMap"></script>

</body>
</html>